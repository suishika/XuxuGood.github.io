.darkmode-layer
  display: none
.darkmode-toggle
  z-index: 1001
  &:before
    font-family: hexo-config('tag_plugins.note.iconfont')
    font-weight: bold
    content: '\f186'
    color: white

.darkmode-background
  z-index: -1000000 !important
.darkmode--activated
  --color-site-bg: convert(hexo-config('color_scheme.dark.site_bg'))
  --color-site-inner: convert(hexo-config('color_scheme.dark.site_inner'))
  --color-site-footer: convert(hexo-config('color_scheme.dark.site_footer'))
  --color-card: convert(hexo-config('color_scheme.dark.card'))
  --color-text: convert(hexo-config('color_scheme.dark.text'))

  --color-block: convert(hexo-config('color_scheme.dark.block'))
  --color-codeblock: convert(hexo-config('color_scheme.dark.codeblock'))
  --color-inlinecode: convert(hexo-config('color_scheme.dark.inlinecode'))
  --color-h1: convert(hexo-config('color_scheme.dark.h1'))
  --color-h2: convert(hexo-config('color_scheme.dark.h2'))
  --color-h3: convert(hexo-config('color_scheme.dark.h3'))
  --color-h4: convert(hexo-config('color_scheme.dark.h4'))
  --color-h5: convert(hexo-config('color_scheme.dark.h5'))
  --color-h6: convert(hexo-config('color_scheme.dark.h6'))
  --color-p: convert(hexo-config('color_scheme.dark.p'))
  --color-list: convert(hexo-config('color_scheme.dark.list'))
  --color-list-hl: convert(hexo-config('color_scheme.dark.list_hl'))
  --color-meta: convert(hexo-config('color_scheme.dark.meta'))
  --color-link: convert(hexo-config('color_scheme.dark.meta'))


  if hexo-config('plugins.backstretch.position') == 'fixed'
    .backstretch
      background-color: #282c34 !important
    .backstretch-item
      display: none !important
  else
    .l_body
      background-color: var(--color-site-bg) !important
  img
    filter: brightness(convert(hexo-config('color_scheme.dark.brightness'))) !important
  .lazyload
    filter: brightness(convert(hexo-config('color_scheme.dark.brightness'))) !important
  .pdf
    filter: brightness(convert(hexo-config('color_scheme.dark.brightness'))) !important
  //header
  .l_header .wrapper .title
    color: var(--color-meta)
  .l_header ul.nav-list-h>li>a, ul.list-v >li>a
    color: var(--color-list)
  .blur
    background: var(--color-site-bg) !important
  .nav-main
    .u-search-input
      background: var(--color-card) !important
  .l_main .article .prev-next>a
    background: var(--color-block)
    &:hover
      background: var(--color-card)
  .article blockquote
    background: var(--color-block)
  .article-title a
    color: var(--color-h1)
  details>summary
    color: var(--color-p)
    background: var(--color-site-bg)
  details
    border: 1px solid var(--color-site-bg)
    background: var(--color-site-bg)
  //search
  #u-search .modal
    background: var(--color-card) !important
  #u-search .modal-header
    background: var(--color-card) !important
  #u-search .modal-body
    background: var(--color-card) !important
  #u-search .modal-body .modal-results .result:hover
    background: var(--color-block) !important
  //phone search
  .l_header .m_search
    @media screen and (max-width: $device-mobile)
      background: var(--color-site-bg) !important
  //side
  .widget.blogger .content .social-wrapper a.social:hover
    background: var(--color-card)
  .content
    color: var(--color-p)
  .note
    background: var(--color-block) !important
  div.tabs ul.nav-tabs li.tab.active a
    color: var(--color-p)
    background: var(--color-card)
  kbd
    background: var(--color-block) !important
  .cover-wrapper.dock .menu .list-h a:hover, .cover-wrapper.featured .menu .list-h a:hover, .cover-wrapper.focus .menu .list-h a:hover
    color: var(--color-text) !important
  //highlight
  .gutter
    background: var(--color-card) !important
    background-color: var(--color-card) !important
  .highlight figcaption
    background-color: #21252b
  .highlight pre .line, .highlight pre .params
    color: rgba(158, 142, 142, 0.9)
  //table
  *:not(.highlight) >table tr
    background-color: var(--color-card)
  *:not(.highlight) >table th
    background: var(--color-site-bg)
  *:not(.highlight) table td,*:not(.highlight) table th
    border-color: var(--color-site-bg)
  *:not(.highlight) >table tr:hover
    background: var(--color-codeblock)
  .timenode .highlight
    border-color: var(--color-site-bg) !important
  blockquote p
    color: var(--color-p)
  // tags
  #archive-page .archive .all-tags ul li span
    color: var(--color-text)
    background: #6f6f72
  if hexo-config('comments.service')=='gitalk'
    .gt-container .gt-header-textarea
      background-color: var(--color-card)
      &:hover
        background-color: var(--color-block)
    .gt-container .gt-comment-content
      background-color: var(--color-card)
      &:hover
        box-shadow: none
    .gt-container .gt-comment-admin .gt-comment-content
      background-color: var(--color-card)
  if hexo-config('comments.service')=='minivaline'
    .MiniValine .vpage .more
      background: var(--color-site-bg)
    .MiniValine .vlist .vcard .vcomment-body .text-wrapper .vcomment.expand:before
      background: linear-gradient(180deg, rgba(246,246,246,0), rgba(0,0,0,0.9))
    .MiniValine .vlist .vcard .vcomment-body .text-wrapper .vcomment.expand:after
      background: rgba(0,0,0,0.9)
    .MiniValine .vlist .vcard .vcomment-body .text-wrapper .vcomment pre
      background: var(--color-site-bg)
      border: 1px solid var(--color-site-bg)
    .MiniValine .vinputs-area .vextra-area .vsmile-icons
      background: transparent
    .MiniValine .vlist .vcard .vcomment-body .vhead
      filter: brightness(85%)
    .MiniValine .vbtn
      background: var(--color-card)
      &:hover
        background: var(--color-block)
    .MiniValine .vpage .more:hover
      background: var(--color-card)
  if hexo-config('plugins.aplayer.enable')
    .aplayer
      background: var(--color-site-bg)
    .aplayer .aplayer-list ol li:hover
      background: rgba($color-theme,.2)
    .aplayer .aplayer-list ol li.aplayer-list-light
      background: var(--color-block)
    .aplayer-info
      background: var(--color-site-bg) !important
    .aplayer .aplayer-lrc:before
      background: linear-gradient(180deg,#282c34 0,hsla(0,0%,100%,0))
    .aplayer .aplayer-lrc:after
      background: linear-gradient(180deg,hsla(0,0%,0%,0) 0,hsla(0,0%,13%,.8))
    .aplayer-pic
      filter: brightness(convert(hexo-config('color_scheme.dark.brightness')))
    .aplayer .aplayer-list ol li
      border-top: 1px solid var(--color-card)
    .aplayer.aplayer-withlist .aplayer-info
      border-bottom: 1px solid var(--color-block)
  if hexo-config('comments.service')=='valine'
    #valine_container button
      background-color: var(--color-block) !important
    #valine_container .vcards .vcontent.expand:before
      background: none !important
    #valine_container .vcards .vcontent.expand:after
      background:	#393c40 !important
    .v[data-class=v] code, .v[data-class=v] pre
      background-color: #332828 !important

// 自定义修改区域
.darkmode--activated
  .darkmode-toggle
    z-index: 1001
    &:before
      content: '\f185'
      transform: scale(1.4)
      color: black
  .highlight
    background: var(--color-site-bg) !important
    figcaption
      color: #847a7d !important
      background: var(--color-site-bg) !important
    & pre .comment
      color: #847a7d !important
  .list-h i
    color: #b04213 !important
  article#comments p
    color: var(--color-p)
  .gutter
    background-color: var(--color-site-bg) !important
  .timeline-item:before, hr
    background-color: var(--color-block)

  // custom暗黑主题配色
  $custom-hover-color = #44d7b6
  $custom-default-color = #fff
  $custom-underline-color = #4a4a4a
  .l_header ul.list-v {
    background: var(--color-card)
  }

  .l_header .wrapper .nav-main .title, .l_header .wrapper .nav-sub .title {
    color: var(--color-list);
  }

  .l_header ul.list-v hr {
    border-bottom: 0.5px solid var(--color-list);
  }

  .l_header ul > li > a {
    color: var(--color-list) !important;
  }

  .l_header .m_search .input:focus {
    border: 2px solid var(--color-list);
  }

  .l_header .m_search .icon {
    color: var(--color-list);
  }

  .l_header .m_search .input::-webkit-input-placeholder {
    color: var(--color-list);
  }

  .l_header .m_search .input:-moz-placeholder {
    color: var(--color-list);
  }

  .l_header .m_search .input::-moz-placeholder {
    color: var(--color-list);
  }

  .l_header .m_search .input:-ms-input-placeholder {
    color: var(--color-list);
  }

  /* 首页向下滚动图标颜色 */
  .cover-wrapper .scroll-down .scroll-down-effects {
    color: $custom-default-color;
  }

  /* 阅读全文按钮样式 */
  .meta-v3 .readmore {
    color: var(--color-list);
  }

  .meta-v3 .readmore:hover {
    color: $color-hover;
  }

  /* 小组件样式 */
  if hexo-config('widgetHeader.enable') {
    .widget header.pure {
      background: var(--color-site-bg);
    }
  }

  /* 评论样式 */
  #veditor {
    background: unset;
  }

  article#comments #valine_container .vwrap .vheader .vinput{
    border-bottom: 1px dashed var(--color-list);
  }

  article#comments #valine_container .vwrap .vheader .vinput:hover{
    border-bottom: 1px dashed $custom-default-color;
  }

  article#comments #valine_container .vwrap{
    border: 1px dashed var(--color-list);
  }

  article#comments #valine_container .vwrap:hover{
    border: 1px dashed $custom-default-color;
  }

  #valine_container .vcards .vcard {
    border: 1px dashed var(--color-list);
  }

  #valine_container .vcards .vcard:hover {
    border: 1px dashed $custom-default-color;
  }

  /* 评论按钮样式 */
  article#comments #valine_container button:hover {
    color: $custom-default-color;
    background: alpha($custom-default-color, .1) !important;
  }

  /* 评论回复按钮样式 */
  .v .vcards .vcard .vh .vmeta .vat{
    border: 1px solid var(--color-list) !important;
  }

  article#comments #valine_container .vcards .vmeta .vat {
    color: var(--color-list);
  }

  article#comments #valine_container .vcards .vmeta .vat:hover {
    color: $custom-default-color;
    border: 1px solid $custom-default-color !important;
    background: alpha($custom-default-color, .1) !important;
    text-decoration: none;
  }

  .v[data-class=v] .vicon {
    fill: var(--color-list);
  }

  /* 表情hover样式 */
  article#comments #valine_container .vwrap .vemojis i:hover, article#comments #valine_container .vwrap .vpreview i:hover {
    background: var(--color-list);
    box-shadow: unset;
  }

  /* 表情、预览选中样式 */
  article#comments #valine_container .vwrap .vedit span.actived {
    fill: $custom-default-color;
  }

  /* 自定义文章footer hr样式 */
  .l_main .post .article-meta#bottom hr {
    border: 2px dashed var(--color-list);
  }

  .l_main .post .article-meta#bottom hr:before {
    color: $custom-default-color;
  }

  /* botui对话框样式 */
  .pop-container {
    background-color: #566569
  }

  .botui-container {
    background-color: #ffffff47;
  }

  /* tabs样式 */
  div.tabs{
    border: 1px solid alpha($color-p, .5)
  }

  /* 小组件文章分类样式调整 */
  .widget >.content ul.entry a:hover {
    border-left: 2px solid $custom-default-color;
    color: $custom-default-color;
  }

  .widget >.content ul.entry a.active {
    border-left: 2px solid $custom-default-color;
    color: $custom-default-color;
  }

  .widget >.content ul.entry a .badge {
    color: unset;
  }

  .widget >.content ul.entry a.active .badge{
    color: $custom-default-color;
  }

  /* 小组件本文目录样式调整 */
  .l_side .toc-wrapper .content a:hover {
    color: $custom-default-color;
    border-left: 2px solid $custom-default-color;
  }

  .l_side .toc-wrapper .content a.active {
    color: $custom-default-color;
    border-left: 2px solid $custom-default-color;
  }

  /* 文章归档页面样式调整 */
  div.timenode:before, div.timenode:after {
    background: $custom-hover-color;
  }

  div.timenode .meta:before{
    background: alpha($custom-hover-color, .5)
  }

  div.timenode .meta:after {
    background: $custom-hover-color;
  }

  div.timenode:hover .meta:before{
    background: alpha($custom-hover-color, .5)
  }

  div.timenode:hover .meta:after{
    background: $custom-hover-color;
  }

  /* 文章分类页面样式调整 */
  article#cat .all-cats a:hover {
    color: $custom-default-color;
  }

  /* 进度条样式 */
  #nprogress .bar {
    background: $custom-hover-color
  }

  /* 文章code样式 */
  .article code:not([class]) {
    border: 1px solid var(--color-inlinecode);
  }

  /* 有序列表 */
  .md ol > li:before{
    color: var(--color-site-bg);
    background-color: var(--color-list);
  }
  /* 无序列表 */
  .md ul li:before{
    border: 0.2rem solid var(--color-list);
    background: $custom-default-color;
  }

  .md ul > li:hover:before {
    border-color: var(--color-list);
  }

  /* 代码块滚动条样式 */
  .highlight >table::-webkit-scrollbar-thumb {
    background: $color-theme;
  }

  /* 相关文章滚动条样式 */
  .md .footer .related_posts .body .vlts-rps:hover::-webkit-scrollbar-thumb {
    background: $color-theme;
  }

  /* 文章底部打赏样式 */
  #github {
    opacity: 0.5;
  }

  #RewardText, #RewardBox {
    filter: brightness(convert(hexo-config('color_scheme.dark.brightness'))) !important
  }

  /* 页脚底部a标签样式 */
  footer.footer a {
    color: var(--color-list)
  }

  /*右键菜单按钮与下拉菜单按钮样式*/
  .rightmenu hr {
    border-bottom: 1px solid var(--color-list) !important
  }

  ul.list-v.rightmenu, .dropmenu-wrapper .dropmenu ul.list-v {
    background: var(--color-card);
  }

  ul.list-v.rightmenu li a, .dropmenu-wrapper .dropmenu ul.list-v > li > a {
    color: var(--color-list) !important;
  }

  ul.list-v.rightmenu li a:hover, .dropmenu-wrapper .dropmenu ul.list-v > li > a:hover {
    color: $custom-default-color !important;
    background: var(--color-site-bg);
  }

  ul.list-v.rightmenu li.music.name p.nav.music-title {
    color: var(--color-list);
  }

  ul.list-v.rightmenu li.music a.nav.volume .aplayer-volume-bar {
    background: var(--color-list);
  }

  ul.list-v.rightmenu li.music a.nav.volume .aplayer-volume-bar .aplayer-volume {
    background: $custom-hover-color;
  }

  /* 关于页面打赏样式 */
  .single-reward .reward-main .lazyload {
    filter: unset !important;
  }

  /* 文章h1,h2样式 */
  .article h1, .article h2 {
    border-bottom: 1px solid $custom-underline-color;
  }

  /* 文章列表页下划线样式 */
  .meta-v3[line_style='dashed'] {
    border-top: 2px dashed $custom-underline-color;
  }

